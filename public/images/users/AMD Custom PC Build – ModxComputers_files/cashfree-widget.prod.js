(()=>{let e,t=!1;window.addEventListener("load",(function(){if(t)return;const a=document.getElementById("cashfree-widget");if(!a)return;const n=document.getElementById("cf-iframe");n&&n.parentElement.removeChild(n);const s=document.createElement("iframe");("no"===a.dataset.isoffers&&"no"===a.dataset.ispaylater&&"no"===a.dataset.isemi||!a.dataset.amount||""===a.dataset.amount||a.dataset.appid.includes("data")||""===a.dataset.appid)&&(s.style.display="none"),s.src="https://cf-widget-frame.cashfree.com/",s.id="cf-iframe",s.loading="eager",s.style.height="100%",s.style.border="none",s.onload=async()=>{e=await(async()=>{if("no"===a.dataset.isoffers&&"no"===a.dataset.ispaylater&&"no"===a.dataset.isemi||!a.dataset.amount||""===a.dataset.amount||a.dataset.appid.includes("data")||""===a.dataset.appid)return;const e=await fetch(`https://receiver.cashfree.com/pgnextgenconsumer/uiapi/external/merchants/offers?appId=${a.dataset.appid}&amount=${a.dataset.amount}`,{method:"POST",body:JSON.stringify({isOffer:"yes"===a.dataset.isoffers,isPayLater:"yes"===a.dataset.ispaylater,isEMIPlans:a.dataset.amount>2500&&"yes"===a.dataset.isemi}),headers:{"Content-type":"application/json"}});return await e.json()})(),(e.statusCode||0===e.offerDetails.offers.length&&0===e.payLaters.length&&0===e.emiDetails.ccEMIPlans.length&&0===e.emiDetails.dcEMIPlans.length)&&(s.style.display="none"),s.contentWindow.postMessage({frameDataObj:e,amount:a.dataset.amount,appId:a.dataset.appid},"https://cf-widget-frame.cashfree.com/")},a.appendChild(s);const o=document.getElementById("cf-iframe-details");o&&o.parentElement.removeChild(o);const i=document.createElement("iframe");i.src="https://cf-widget-detailframe.cashfree.com/",i.id="cf-iframe-details",i.loading="eager",i.style.width="100%",i.style.height="100vh",i.style.border="none",i.style.zIndex="99999",i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.display="none",a.appendChild(i),window.onmessage=function(t){t.data.isModelOpen&&(i.style.display="block",i.onload=()=>{i.contentWindow.postMessage({opentab:t.data.opentab,amount:a.dataset.amount,frameDataObj:e},"https://cf-widget-detailframe.cashfree.com/")},a.appendChild(i)),t.data.isModelClose&&(document.getElementById("cf-iframe-details").style.display="none")}})),window.CF_Widget=function({amount:a,shopId:n,clientID:s,offers:o,payLater:i,emi:d,theme:r}){t=!0;let l,c,m,f,p=!1;return s&&(l=r.widgetColor,c=r.linkColor,m=r.cfLogoTheme,f=r.isLogoActive),{load:function(){if(p)return;p=!0;const t=document.getElementById("cashfree-widget");if(!t)return;const r=document.getElementById("cf-iframe");r&&r.parentElement.removeChild(r);const h=async()=>{if(s){const e=await fetch(`https://receiver.cashfree.com/pgnextgenconsumer/uiapi/external/merchants/offers?appId=${s}&amount=${a}`,{method:"POST",body:JSON.stringify({isOffer:"true"===o,isPayLater:"true"===i,isEMIPlans:a>2500&&"true"===d}),headers:{"Content-type":"application/json"}});return await e.json()}{const[e,t]=await Promise.all([fetch(`https://receiver.cashfree.com/pgnextgenconsumer/uiapi/external/merchant/widget/offer?shopId=${n}&amount=${a}`,{method:"GET",headers:{"Content-type":"application/json"}}),fetch(`https://receiver.cashfree.com/pgnextgenconsumer/uiapi/external/merchant/widget/settings?shopId=${n}`,{method:"GET",headers:{"Content-type":"application/json"}})]);return[await e.json(),await t.json()]}},y=document.createElement("iframe");y.src="https://cf-widget-frame.cashfree.com/",y.id="cf-iframe",y.style.height="100%",y.style.border="none",y.loading="eager",y.onload=async()=>{let t;s?(e=await h(),t={widgetColor:l,linkColor:c,cfLogoTheme:m,isLogoActive:f}):[e,t]=await h(),(e.statusCode||0===e.offerDetails.offers.length&&0===e.payLaters.length&&0===e.emiDetails.ccEMIPlans.length&&0===e.emiDetails.dcEMIPlans.length)&&(y.style.display="none"),y.contentWindow.postMessage({frameDataObj:e,amount:a,appId:"",widgetConfigObj:t},"https://cf-widget-frame.cashfree.com/")},t.appendChild(y);const g=document.getElementById("cf-iframe-details");g&&g.parentElement.removeChild(g);const u=document.createElement("iframe");u.src="https://cf-widget-detailframe.cashfree.com/",u.id="cf-iframe-details",u.loading="eager",u.style.width="100%",u.style.height="100vh",u.style.border="none",u.style.zIndex="99999",u.style.position="fixed",u.style.top="0px",u.style.left="0px",u.style.display="none",t.appendChild(u),window.onmessage=function(n){n.data.isModelOpen&&(u.style.display="block",u.onload=()=>{u.contentWindow.postMessage({opentab:n.data.opentab,amount:a,frameDataObj:e},"https://cf-widget-detailframe.cashfree.com/")},t.appendChild(u)),n.data.isModelClose&&(document.getElementById("cf-iframe-details").style.display="none")}}}}})()